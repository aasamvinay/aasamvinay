
<!DOCTYPE html>
<html lang="en">
<meta http-equiv="content-type" content="text/html;charset=utf-8" />
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link rel="apple-touch-icon" sizes="76x76" href="assets/img/apple-icon.png">
<link rel="icon" type="image/png" href="assets/img/favicon.png">
<title>
    Devices
  </title>

<script src="js/charts_g.js"></script>
 
    <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>  -->

   <!-- <script src="http://maps.googleapis.com/maps/api/js?key=AIzaSyCVVl4erHk_UhwZP_jnidjLK81BjEBgV1A"></script> -->


<!-- <link href="https://fonts.googleapis.com/css?family=Poppins:200,300,400,600,700,800" rel="stylesheet" /> -->
<link href="use.fontawesome.com/releases/v5.0.6/css/all.css" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="assets/dt/datatables.min.css">
<link href="assets/css/nucleo-icons.css" rel="stylesheet" />

<link href="assets/css/black-dashboard.min3f71.css?v=1.1.1" rel="stylesheet" />

<link href="assets/demo/demo.css" rel="stylesheet" />
<script type="text/javascript" src="assets/dt/jquery-3.5.1.js"></script>
<script type="text/javascript" src="assets/dt/datatables.min.js"></script>
<script src="js/jquery.min.js"></script>


  <script src="assets/js/nadd.js"></script>
    <script src="assets/js/nadd2.js"></script>

<style type="text/css">
table.dataTable thead tr {
  color: blue;
}
  .fixed-plugin{
    display: none;
  }
</style>
<style type="text/css">
  div.dataTables_wrapper {
        width: 1150px;
        margin: 0 auto;
    }


  @media (min-width: 576px) {.modal-dialog {
    max-width: 800px;
    margin: 1.75rem auto;
}}

#google-map {
        width: 100%;
        /*height: 500px;*/
        height: 300px;
    }
.button_red{
  background-color: #f21900;
  background-image: linear-gradient(to bottom left,#ff0000,#dc4120,#ff9000);

}


</style>


</head>
<body class="white-content">
<div class="wrapper">
<div class="navbar-minimize-fixed">
<button class="minimize-sidebar btn btn-link btn-just-icon">
<i class="tim-icons icon-align-center visible-on-sidebar-regular text-muted"></i>
<i class="tim-icons icon-bullet-list-67 visible-on-sidebar-mini text-muted"></i>
</button>
</div>
<div class="sidebar">

<div class="sidebar-wrapper">
<div class="logo">
<a href="javascript:void(0)" class="simple-text logo-mini">
IIC
</a>
<a href="javascript:void(0)" class="simple-text logo-normal">
INDUSTRY IN CLOUD
</a>
</div>
<ul class="nav">
<li>
<a href="/dashboard">
<i class="tim-icons icon-chart-pie-36"></i>
<p>Dashboard</p>
</a>
</li>
<li class="active">
<a href="/devices">
<i class="tim-icons icon-atom"></i>
<p>Devices</p>
</a>
</li>
<li>
<a href="/notifications">
<i class="tim-icons icon-bell-55"></i>
<p>Notifications</p>
</a>
</li>
<li>
<a href="/statics">
<i class="tim-icons icon-coins"></i>
<p>Statistics</p>
</a>
</li>
{% if role_type == 'customer_admin' %}
<li>
<a href="/userdetails">
<i class="tim-icons icon-badge"></i>
<p>Users</p>
</a>
</li>
{% endif %}
<li>
<a href="/profile_view">
<i class="tim-icons icon-single-02"></i>
<p>Profile</p>
</a>
</li>
<li>
<a href="{{ url_for('logout') }}">
<i class="tim-icons icon-button-power"></i>
<p>Logout</p>
</a>
</li>

</ul>
</div>
</div>
<div class="main-panel">

<nav class="navbar navbar-expand-lg navbar-absolute navbar-transparent">
<div class="container-fluid">
<div class="navbar-wrapper">
<div class="navbar-minimize d-inline">
<button class="minimize-sidebar btn btn-link btn-just-icon" rel="tooltip" data-original-title="Sidebar toggle" data-placement="right">
<i class="tim-icons icon-align-center visible-on-sidebar-regular"></i>
<i class="tim-icons icon-bullet-list-67 visible-on-sidebar-mini"></i>
</button>
</div>
<div class="navbar-toggle d-inline">
<button type="button" class="navbar-toggler">
<span class="navbar-toggler-bar bar1"></span>
<span class="navbar-toggler-bar bar2"></span>
<span class="navbar-toggler-bar bar3"></span>
</button>
</div>
<a class="navbar-brand" href="javascript:void(0)">Dashboard</a>
</div>
<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navigation" aria-expanded="false" aria-label="Toggle navigation">
<span class="navbar-toggler-bar navbar-kebab"></span>
<span class="navbar-toggler-bar navbar-kebab"></span>
<span class="navbar-toggler-bar navbar-kebab"></span>
</button>
<div class="collapse navbar-collapse" id="navigation">
<ul class="navbar-nav ml-auto">
 

<li class="dropdown nav-item">
<a href="#" class="dropdown-toggle nav-link" data-toggle="dropdown">

<div class="photo">
<img src="assets/img/mike.jpg" alt="Profile Photo">
</div>
{{full_name}}
<b class="caret d-none d-lg-block d-xl-block"></b>
<!-- <p class="d-lg-none">
Log out
</p> -->
</a>
<ul class="dropdown-menu dropdown-navbar">

<li class="nav-link">
<a href = "{{ url_for('logout') }}" class="nav-item dropdown-item">Log out</a>
</li>
</ul>
</li>
<li class="separator d-lg-none"></li>
</ul>
</div>
</div>
</nav>
<div class="modal modal-search fade" id="searchModal" tabindex="-1" role="dialog" aria-labelledby="searchModal" aria-hidden="true">
<div class="modal-dialog" role="document">
<div class="modal-content">
<div class="modal-header">
<input type="text" class="form-control" id="inlineFormInputGroup" placeholder="SEARCH">
<button type="button" class="close" data-dismiss="modal" aria-label="Close">
<i class="tim-icons icon-simple-remove"></i>
</button>
</div>
</div>
</div>
</div> 

<div class="content">

<div class="row">

<div class="col-lg-12">
<div class="card">



  
<div class="card-header">
  <!-- {{s_table|count}} -->
  {% if role_type == 'user_admin' %}

  {% if s_table|count == 0 %}
    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#myModal_add">Add Machine</button>
 {% endif %}
  {% endif %}

  {% if role_type == 'customer_admin' %}

  {% if s_table|count == 1 %}
    <button type="button" class="btn btn-primary" onclick="deletemach();">Delete Machine</button>
 {% endif %}
  {% endif %}
 </div>
<div class="card-body">
<div class="table-responsive">
<table class="table">
<thead class="text-primary">
<tr>
<th class="text-center">
MACHINE ID
</th>

<th class="text-left">
INFO.
</th>
<th class="text-left">
PRODUCTION
</th>
<th class="text-left">
STATUS
</th>
<th class="text-left">
ALARM
</th>
<th class="text-left">
ACTION
</th>
 

</tr>
</thead>
<tbody>

{% for s in s_table %}
<tr>
 
<!-- <td class="text-center">
<div class="form-check">
<label class="form-check-label">
<input class="form-check-input" type="checkbox" value="" checked="">
<span class="form-check-sign">
<span class="check"></span>
 </span>
</label>
</div>
</td> -->

<td class="text-left">
{{s['uid']}}
</td>
<td class="text-left">
Run: {% if s['run'] == '1' %}<i class="fas fa-circle" style="color: #14d211;"></i> {% endif %}{% if s['run'] == '0' %}<i class="fas fa-circle" style="color: #ff4834;"></i> {% endif %}
, Stop: {% if s['stop'] == '1' %}<i class="fas fa-circle" style="color: #ff4834;"></i> {% endif %}{% if s['stop'] == '0' %}<i class="fas fa-circle" style="color: #14d211;"></i> {% endif %}
, Alarm: {% if s['alarm'] == '1' %}<i class="fas fa-circle" style="color: #ff4834;"></i> {% endif %}{% if s['alarm'] == '0' %}<i class="fas fa-circle" style="color: #14d211;"></i> {% endif %}
, Pause: {% if s['pause'] == '1' %}<i class="fas fa-circle" style="color: #ff4834;"></i> {% endif %}{% if s['pause'] == '0' %}<i class="fas fa-circle" style="color: #14d211;"></i> {% endif %}
, Emergency : {% if s['emergency'] == '1' %}<i class="fas fa-circle" style="color: #ff4834;"></i> {% endif %}{% if s['emergency'] == '0' %}<i class="fas fa-circle" style="color: #14d211;"></i> {% endif %}
<br>
            Alarm_Mach: {{s['alarm_mach']}}, Prog_Number: {{s['task_number']}} 
</td>
<td class="text-left">
Pices Made : {{s['picesmade']}}<br>
Machine Connected : {{s['machine_connected']}}
</td>
<td class="text-left">
{% if s['power_on'] == '1' %}
ON <i class="fas fa-circle" style="color: #14d211;"></i><br>
{% endif %}
{% if s['power_on'] == '0' %}
OFF <i class="fas fa-circle" style="color: #ff4834;"></i><br>
{% endif %}

{{s['lastupdate']}}
</td>
<td class="text-left">
{{s['alarm_mach']}}
</td>
<td class="text-left">

 <!--  <a href="http://www.google.com/maps/search/{{s['lat']}},{{s['lng']}}" target="_blank" data-position="top" data-tooltip="Navigate"><i class="tim-icons icon-square-pin"></i></a>


 &nbsp;&nbsp;&nbsp; -->



 <a data-toggle="modal" data-target="#myModal_edit" href="javascript:void(0)"  
               onclick="Editmachine('{{s['uid']}}','{{s['machine_name']}}','{{s['machine_connected']}}','{{s['token']}}','{{s['city']}}','{{s['country']}}','{{s['state']}}','{{s['machine_info']}}','{{s['protocol_communication']}}','{{s['ipaddress']}}','{{s['port']}}')">
                <i class="tim-icons icon-pencil"></i>
              </a>
             
&nbsp;&nbsp;&nbsp;
<!-- <a data-toggle="modal" data-target="#myModal_action" href="javascript:void(0)"  
               onclick="Actionmachine('{{s['uid']}}','{{s['machine_name']}}','{{s['run']}}','{{s['stop']}}','{{s['pause']}}')">
                <i class="tim-icons icon-settings"></i>
              </a> -->

<!-- <a href="javascript:void(0)"  
               onclick="Actionmachine('{{s['uid']}}','{{s['machine_name']}}','{{s['run']}}','{{s['stop']}}','{{s['pause']}}','{{s['run_action']}}','{{s['stop_action']}}','{{s['pause_action']}}')">
                <i class="tim-icons icon-settings"></i>
              </a> -->


</td>

 

</tr>

{% endfor %}



</tbody>
</table>











</div>
</div>
</div>
</div>
</div>








<div class="row">
      <!-- <div class="col s12 l5">
         <div class="card user-statistics-card animate fadeLeft">
            <div class="card-content">
                <h4 class="card-title mb-0">Pie Chart</h4> 
              
               
            </div>
         </div>
      </div> -->
      <div class="col s12 l6">
         <!-- Recent Buyers -->
         <div class="card recent-buyers-card animate fadeUp">
            <div class="card-content" style="margin-left: 40px;">
               <h3>Summary</h3>
               <p style="color:blue; text-decoration: underline;font-weight: 600;">TOTAL time production</p>              
               <h2>{{total_time}}</h2>
              
               <p style="color:blue; text-decoration: underline;font-weight: 600;">TOTAL time waiting</p>              
               <h2>{{total_waiting_time}}</h2>
              
               <p style="color:blue; text-decoration: underline;font-weight: 600;">Real productivity</p>              
               <h2>{{total_real_time}}</h2>
               
            </div>
         </div>
      </div>
      <div class="col s12 l6">
         <canvas id="myChart" style="width:100%;max-width:600px; height: 300px;"></canvas>
      </div>
   </div>




<div class="row">
    <div class="col s12">
      <div class="card">
        <div class="card-content">
          <div class="row">
            <div class="col s12">
              <table id="example" class="table table-striped table-bordered dt-responsive wrap">
                <thead>
          <tr>
                <th colspan="2">Task</th>
                <th colspan="8">Measures for prog.</th>
                <th colspan="2">Waiting Time in Production</th>
                <th colspan="2">Real Time in Production</th>
            </tr>
            <tr>
                <th>Prog. N</th>
                <th>Prog. Name</th>
                <th>Length</th>
                <th>Height</th>
                <th>Corner</th>
                <th>Offset X</th>
                <th>Offset Y</th>
                <th>Offset Corner</th>
                <th>Widthead</th>
                <th>Width shoulders</th>
                <th>Lenght shoulders</th>
                <th>Widthfeet</th>
                <th>Widthfeet2</th>
                <th>Lengthfeet</th>
                <th>Typecover</th>
                <th>Date</th>
                <th>Time</th>
                <th>Date</th>
                <th>Time min</th>
            </tr>
        </thead>
        <tbody>
          {% for s in p_table %}
            <tr>
                <td>{{s['program_number']}}</td>
                <td>{{s['program_name']}}</td>
                <td>{{s['length']}}</td>
                <td>{{s['height']}}</td>
                <td>{{s['corner']}}</td>
                <td>{{s['offsetx']}}</td>
                <td>{{s['offsety']}}</td>
                <td>{{s['offsetcorner']}}</td>
                <td>{{s['widthead']}}</td>
                <td>{{s['widthshoulders']}}</td>
                <td>{{s['lenghtshoulders']}}</td>
                <td>{{s['widthfeet']}}</td>
                <td>{{s['widthfeet2']}}</td>
                <td>{{s['lengthfeet']}}</td>
                <td>{{s['typecover']}}</td>
                <td>{{s['waiting_dt']}}</td>
                <td>{{s['waiting_time']}}</td>
                <td>{{s['real_dt']}}</td>
                <td>{{s['real_time']}}</td>
            </tr>
          {% endfor %}
        </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>




</div>
</div>
<footer class="footer">
<div class="container-fluid">
 
<div class="copyright">
©
<script>
              document.write(new Date().getFullYear())
            </script> All rights reserved @ INDUSTRY IN CLOUD
</div>
</div>
</footer>
</div>
</div>

{% if role_type == 'customer_admin' %}
<div class="fixed-plugin">
<div class="dropdown show-dropdown">
<a href="#" data-toggle="dropdown">
<i class="fa fa-cog fa-2x"> </i>
</a>
<ul class="dropdown-menu">
<li class="header-title"> Sidebar Background</li>
<li class="adjustments-line">
<a href="javascript:void(0)" class="switch-trigger background-color">
<div class="badge-colors text-center">
<span class="badge filter badge-primary active" data-color="primary"></span>
<span class="badge filter badge-info" data-color="blue"></span>
<span class="badge filter badge-success" data-color="green"></span>
<span class="badge filter badge-warning" data-color="orange"></span>
<span class="badge filter badge-danger" data-color="red"></span>
</div>
<div class="clearfix"></div>
</a>
</li>
 
<li class="adjustments-line">
<div class="switch-change-color mt-3" style="text-align: center;">

<input type="radio" name="bedStatus" id="light" checked="checked" value="light"><span style="color:white;">Light</span>
<input type="radio" name="bedStatus" id="dark" value="dark"><span style="color:white;">Dark</span>

</div>
</li>
<li class="button-container mt-4">
 
</li>
 
</ul>
</div>
</div>
 {% endif %}





<!-- Modal -->
  <div class="modal fade" id="myModal_add" role="dialog">
    <div class="modal-dialog">
    
    <form id="form_addmachine">
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title">Add Machine</h4>
        </div>
        <div class="modal-body">
          <div class="row">
          <div class="col-md-3 pr-md-1">
          <div class="form-group">
          <label>Machine ID</label>
          <input style="color:black;" type="text" class="form-control" id="new_uid_setaddress">
          </div>
          </div>
          <div class="col-md-3 px-md-1">
          <div class="form-group">
          <label>Machine Name</label>
          <input style="color:black;" type="email" class="form-control" id="new_machine_name">
          </div>
          </div>
          <div class="col-md-3 pl-md-1">
          <div class="form-group">
          <label>Machine Connected</label>
          <input style="color:black;background-color: #ffffff;" type="text" class="form-control" id="new_machine_connected" readonly>
          </div>
          </div>
          <div class="col-md-3 pl-md-1">
          <div class="form-group">
          <label>Machine Token</label>
          <input style="color:black;background-color: #ffffff;" type="text" class="form-control" id="new_token">
          </div>
          </div>
          </div>







<div class="row">
          <div class="col-md-3 pr-md-1">
          <div class="form-group">
          <label>Protocol Communication</label>
         <select name="new_machine_protocol_comm" class="form-control" id="new_machine_protocol_comm"  style="color:black;">
            <option value="">-- Select --</option>
            <option value="tcpip">TcpIp</option>
            <option value="opcua">OpcUA</option>
            <option value="modbus">Modbus</option>
            <option value="ethercat">Ethercat</option>

            </select>
          </div>
          </div>
          <div class="col-md-3 px-md-1">
          <div class="form-group">
          <label>IP address</label>
          <input style="color:black;" type="text" class="form-control" id="new_machine_ipaddress">
          </div>
          </div>
          <div class="col-md-3 pl-md-1">
          <div class="form-group">
          <label>Port</label>
          <input style="color:black;background-color: #ffffff;" type="text" class="form-control" id="new_machine_port">
          </div>
          </div>
         
          </div>












<!-- 
          <div class="row">
          <div class="col-md-3 pr-md-1">
          <div class="form-group">

            <label>Country</label>
          <select name="country" class="form-control" id="countryA"  style="color:black;">
            <option value="">-- Select --</option>
             </select>

           </div>
          </div>
          <div class="col-md-3 px-md-1">
          <div class="form-group">
          <label>State</label>
          <select name="state" class="form-control" id="stateA"  style="color:black;">
            <option value="">-- Select --</option>
             </select>
           </div>
          </div>
          <div class="col-md-3 pl-md-1">
          <div class="form-group">
          <label>City</label>
          <select name="city" class="form-control" id="cityA"  style="color:black;">
            <option value="">-- Select --</option>
             </select>

           </div>
          </div>
          <div class="col-md-3 pl-md-1">
          <div class="form-group">
          <label>Machine Information</label>
          <input style="color:black;" type="text" class="form-control" id="new_machine_info">
          </div>
          </div>
          </div> -->
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary" data-dismiss="modal" id="addmachine_submit">Save</button>
        </div>
      </div>

    </form>
      
    </div>
  </div>

  <!-- End Modal -->




<!-- Modal -->
  <div class="modal fade" id="myModal_edit" role="dialog">
    <div class="modal-dialog">
    
    <form id="form_editmachine">
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title">Edit Machine</h4>
        </div>
        <div class="modal-body">
          <div class="row">
          <div class="col-md-3 pr-md-1">
          <div class="form-group">
          <label>Machine ID</label>
          <input style="color:black;background-color: #ffffff;" type="text" class="form-control" id="uid_setaddress" readonly>
          </div>
          </div>
          <div class="col-md-3 px-md-1">
          <div class="form-group">
          <label>Machine Name</label>
          <input style="color:black;" type="email" class="form-control" id="machine_name">
          </div>
          </div>
          <div class="col-md-3 pl-md-1">
          <div class="form-group">
          <label>Machine Connected</label>
          <input style="color:black;background-color: #ffffff;" type="text" class="form-control" id="machine_connected" readonly>
          </div>
          </div>
          <div class="col-md-3 pl-md-1">
          <div class="form-group">
          <label>Machine Token</label>
          <input style="color:black;background-color: #ffffff;" type="text" class="form-control" id="token" readonly>
          </div>
          </div>
          </div>

          <div class="row">
            <div class="col-md-3 pl-md-1">
          <div class="form-group">
          <label>Protocol Comm.</label>

          <select name="protocol_comm_" class="form-control" id="protocol_comm_"  style="color:black;">
            <option id='protocol_commP'></option>
            <option value="tcpip">TcpIp</option>
            <option value="opcua">OpcUA</option>
            <option value="modbus">Modbus</option>
            <option value="ethercat">Ethercat</option>

            </select>


          </div>
          </div>
          <div class="col-md-3 pl-md-1">
          <div class="form-group">
          <label>IP Address</label>
          <input style="color:black;background-color: #ffffff;" type="text" class="form-control" id="ipaddress_">
          </div>
          </div>
          <div class="col-md-3 pl-md-1">
          <div class="form-group">
          <label>Port</label>
          <input style="color:black;background-color: #ffffff;" type="text" class="form-control" id="port_">
          </div>
          </div>




          <div class="col-md-3 px-md-1" style="display: none;">
          <div class="form-group">
          <label>Country</label>
          <select name="country" class="form-control" id="countryS"  style="color:black;">
            <option id="countryP"></option>
            </select>

           </div>
          </div>
        </div>

          <!-- <div class="row">
          
          <div class="col-md-3 px-md-1">
          <div class="form-group">
          <label>Country</label>
          <select name="country" class="form-control" id="countryS"  style="color:black;">
            <option id="countryP"></option>
            </select>

           </div>
          </div>
          

          <div class="col-md-3 px-md-1">
          <div class="form-group">
          <label>state</label>
 
          <select name="state" class="form-control" id="stateS"  style="color:black;">
            <option id="stateP"></option>
            </select>

           </div>
          </div>




          <div class="col-md-3 pr-md-1">
          <div class="form-group">
          <label>City</label>
          <select name="city" class="form-control" id="cityS"  style="color:black;">
            <option id="cityP"></option>
            </select>

           </div>
          </div>
          <div class="col-md-3 pl-md-1">
          <div class="form-group">
          <label>Machine Information</label>
          <input style="color:black;" type="text" class="form-control" id="machine_info">
          </div>
          </div>
          </div> -->
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary" data-dismiss="modal" id="editmachine_submit">Save</button>
        </div>
      </div>

    </form>
      
    </div>
  </div>

  <!-- End Modal -->





  <!-- Modal -->
  <div class="modal fade" id="myModal_action" role="dialog">
    <div class="modal-dialog">
    
    <form id="form_actionmachine">
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title">Action</h4>
        </div>
        <div class="modal-body">
          <div class="row">
          <div class="col-md-12 pr-md-1">
          <div class="form-group">
          <p id="mn_setaction"></p>
          <input style="color:black;background-color: #ffffff;" type="hidden" class="form-control" id="uid_setaction" readonly>
          <input style="color:black;background-color: #ffffff;" type="hidden" class="form-control" id="run_setaction" readonly>
          <input style="color:black;background-color: #ffffff;" type="hidden" class="form-control" id="stop_setaction" readonly>
          <input style="color:black;background-color: #ffffff;" type="hidden" class="form-control" id="pause_setaction" readonly>
          </div>
          </div>
          </div>
          <div class="row">
          <div class="col-md-4 pl-md-1">
          <div class="form-group">
          <button type="button" class="btn btn-primary" data-dismiss="modal" id="action_run_submit">Action Run Device</button>
          </div>
          </div>
          <div class="col-md-4 pl-md-1">
          <div class="form-group">
          <button type="button" class="btn btn-primary" data-dismiss="modal" id="action_stop_submit">Action Stop Device</button>
          </div>
          </div>
          <div class="col-md-4 pl-md-1">
          <div class="form-group">
          <button type="button" class="btn btn-primary" data-dismiss="modal" id="action_pause_submit">Action Pause Device</button>
          </div>
          </div>
          </div>

          <div class="row">
          <div class="col-md-3 pl-md-1">
          <div class="form-group">
          <label>New Task Number</label>
          <input style="color:black;background-color: #ffffff;" type="text" class="form-control" id="new_task_number" >
          </div>
          </div>
          <div class="col-md-3 pl-md-1">
          <div class="form-group" style="margin: 29px 0 0 0;">
          <button type="button" class="btn btn-primary" data-dismiss="modal" id="actionmachine_submit">Submit</button>
          </div>
          </div>
          </div>
          
      </div>

    </form>
      
    </div>
  </div>

  <!-- End Modal -->





<script src="assets/js/core/jquery.min.js"></script>
<script src="assets/js/core/popper.min.js"></script>
<script src="assets/js/core/bootstrap.min.js"></script>
<script src="assets/js/plugins/perfect-scrollbar.jquery.min.js"></script>
<script src="assets/js/plugins/moment.min.js"></script>

<script src="assets/js/plugins/bootstrap-switch.js"></script>

<script src="assets/js/plugins/sweetalert2.min.js"></script>

<script src="assets/js/plugins/jquery.tablesorter.js"></script>

<script src="assets/js/plugins/jquery.validate.min.js"></script>

<script src="assets/js/plugins/jquery.bootstrap-wizard.js"></script>

<script src="assets/js/plugins/bootstrap-selectpicker.js"></script>

<script src="assets/js/plugins/bootstrap-datetimepicker.js"></script>

<script src="assets/js/plugins/jquery.dataTables.min.js"></script>

<script src="assets/js/plugins/bootstrap-tagsinput.js"></script>

<script src="assets/js/plugins/jasny-bootstrap.min.js"></script>

<script src="assets/js/plugins/fullcalendar/fullcalendar.min.js"></script>
<script src="assets/js/plugins/fullcalendar/daygrid.min.js"></script>
<script src="assets/js/plugins/fullcalendar/timegrid.min.js"></script>
<script src="assets/js/plugins/fullcalendar/interaction.min.js"></script>

<script src="assets/js/plugins/jquery-jvectormap.js"></script>

<script src="assets/js/plugins/nouislider.min.js"></script>



<script src="assets/js/plugins/chartjs.min.js"></script>

<script src="assets/js/plugins/bootstrap-notify.js"></script>

<script src="assets/js/black-dashboard.min3f71.js?v=1.1.1"></script>

<script src="assets/demo/demo.js"></script>

<script src="assets/demo/jquery.sharrre.js"></script>
<!--  <script>

  var chh = '{{s_table}}';

if (chh != '[]'){
  $('.card-header').hide();
}
else{
  $('.card-header').show();
}



</script> -->
 
<script>
var new_color2 = '{{colorname}}';
$clr = $('.btn-primary');
$main_panel = $('.main-panel');
$full_page = $('.full-page');
$sidebar_responsive = $('body > .navbar-collapse');
$sidebar = $('.sidebar');
$sidebar.attr('data', new_color2);
if (new_color2=='primary') $clr.attr('class', 'btn btn-primary');
if (new_color2=='blue') $clr.attr('class', 'btn btn-info');
if (new_color2=='green') $clr.attr('class', 'btn btn-success');
if (new_color2=='orange') $clr.attr('class', 'btn btn-warning');
if (new_color2=='red') $clr.attr('class', 'btn btn-danger');
$main_panel.attr('data', new_color2);
$full_page.attr('filter-color', new_color2);
$sidebar_responsive.attr('data', new_color2);


var bg_color = 'light';
if (bg_color == 'light'){
  $('body').removeClass('change-background');
  $('body').addClass('white-content');
  $("input[name=bedStatus][value='light']").prop("checked",true);
  $("input[name=bedStatus][value='dark']").prop("checked",false);
}
else{
  $("input[name=bedStatus][value='light']").prop("checked",false);
  $("input[name=bedStatus][value='dark']").prop("checked",true);
}

$(document).ready(function() {
$('input:radio[name=bedStatus]').change(function(){


if (this.value == 'light') {
bgchange("light");
  }
  else if (this.value == 'dark') {
      bgchange("dark");
  }
});

});


    $(document).ready(function() {
      $().ready(function() {
        $sidebar = $('.sidebar');
        $clr = $('.btn-primary');
        $navbar = $('.navbar');
        $main_panel = $('.main-panel');

        $full_page = $('.full-page');

        $sidebar_responsive = $('body > .navbar-collapse');
        sidebar_mini_active = true;
        white_color = false;

        window_width = $(window).width();

        fixed_plugin_open = $('.sidebar .sidebar-wrapper .nav li.active a p').html();



        $('.fixed-plugin a').click(function(event) {
          if ($(this).hasClass('switch-trigger')) {
            if (event.stopPropagation) {
              event.stopPropagation();
            } else if (window.event) {
              window.event.cancelBubble = true;
            }
          }
        });

        $('.fixed-plugin .background-color span').click(function() {
          $(this).siblings().removeClass('active');
          $(this).addClass('active');

          var new_color = $(this).data('color');

          if ($sidebar.length != 0) {

            colorchange(new_color);
            $sidebar.attr('data', new_color);
            if (new_color=='primary') $clr.attr('class', 'btn btn-primary');
            if (new_color=='blue') $clr.attr('class', 'btn btn-info');
            if (new_color=='green') $clr.attr('class', 'btn btn-success');
            if (new_color=='orange') $clr.attr('class', 'btn btn-warning');
            if (new_color=='red') $clr.attr('class', 'btn btn-danger');
          }

          if ($main_panel.length != 0) {
            $main_panel.attr('data', new_color);
          }

          if ($full_page.length != 0) {
            $full_page.attr('filter-color', new_color);
          }

          if ($sidebar_responsive.length != 0) {
            $sidebar_responsive.attr('data', new_color);
          }
        });

        $('.switch-sidebar-mini input').on("switchChange.bootstrapSwitch", function() {
          var $btn = $(this);

          if (sidebar_mini_active == true) {
            $('body').removeClass('sidebar-mini');
            sidebar_mini_active = false;
            blackDashboard.showSidebarMessage('Sidebar mini deactivated...');
          } else {
            $('body').addClass('sidebar-mini');
            sidebar_mini_active = true;
            blackDashboard.showSidebarMessage('Sidebar mini activated...');
          }

          // we simulate the window Resize so the charts will get updated in realtime.
          var simulateWindowResize = setInterval(function() {
            window.dispatchEvent(new Event('resize'));
          }, 180);

          // we stop the simulation of Window Resize after the animations are completed
          setTimeout(function() {
            clearInterval(simulateWindowResize);
          }, 1000);
        });

        $('.switch-change-color input').on("switchChange.bootstrapSwitch", function() {
          var $btn = $(this);

          if (white_color == true) {

            $('body').addClass('change-background');
            setTimeout(function() {
              $('body').removeClass('change-background');
              $('body').removeClass('white-content');
            }, 900);
            white_color = false;
          } else {


            $('body').addClass('change-background');
            setTimeout(function() {
              $('body').removeClass('change-background');
              $('body').addClass('white-content');
            }, 900);

            white_color = true;
          }


        });

        $('.light-badge').click(function() {
          $('body').addClass('white-content');
        });

        $('.dark-badge').click(function() {
          $('body').removeClass('white-content');
        });
      });
    });



    function colorchange(new_color){
  var user_id_pw = '{{user_c_id}}'


  $.ajax({
                type : "post",
                url: '/set_settings',
                dataType : "text",
                data:'setting=colorchange&user_id='+user_id_pw+'&colorname='+new_color,
                success : function(data) {
                  // alert(data);
                  Swal.fire({
                  title: 'Success',
                  icon: 'success',
                  showConfirmButton:false,
                    timer:1500
                }).then(function(){ 
                       location.reload();
                       }
                    );                     
                },
                error : function(data) {
                  Swal.fire({
                    title: 'Error',
                    text:data.responseText,
                    icon: 'error'
                  })                     
                }
        });
}

function bgchange(bg_color){
  var user_id_pw = '{{user_c_id}}'

  $.ajax({
                type : "post",
                url: '/set_settings',
                dataType : "text",
                data:'setting=colorchange&user_id='+user_id_pw+'&bg_color='+bg_color,
                success : function(data) {
                  // alert(data);
                  Swal.fire({
                  title: 'Success',
                  icon: 'success',
                  showConfirmButton:false,
                    timer:1500
                }).then(function(){ 
                       location.reload();
                       }
                    );                     
                },
                error : function(data) {
                  Swal.fire({
                    title: 'Error',
                    text:data.responseText,
                    icon: 'error'
                  })                     
                }
        });
}






function deletemach(){
    $.ajax({
                type : "post",
                url: '/set_settings',
                dataType : "text",
                data:'setting=deletemach',
                success : function(data) {
                  // alert(data);
                  Swal.fire({
                  title: 'Success',
                  icon: 'success',
                  showConfirmButton:false,
                    timer:1500
                }).then(function(){ 
                       location.reload();
                       }
                    );                     
                },
                error : function(data) {
                  Swal.fire({
                    title: 'Error',
                    text:data.responseText,
                    icon: 'error'
                  })                     
                }
        });
}

  </script>
<script>
    $(document).ready(function() {
      // Javascript method's body can be found in assets/js/demos.js
      demo.initDashboardPageCharts();

      demo.initVectorMap();

    });





    $("#addmachine_submit").click(function(){
  var uid = ((document.getElementById('form_addmachine').elements['new_uid_setaddress'].value));
  var machine_name = ((document.getElementById('form_addmachine').elements['new_machine_name'].value));
  var machine_connected = ((document.getElementById('form_addmachine').elements['new_machine_connected'].value));
  var token = ((document.getElementById('form_addmachine').elements['new_token'].value));
  var city = 'city'; //((document.getElementById('form_addmachine').elements['cityA'].value));
  var state = 'state'; //((document.getElementById('form_addmachine').elements['stateA'].value));
  var country = 'country'; //((document.getElementById('form_addmachine').elements['countryA'].value));
  // var postal_code = ((document.getElementById('form_addmachine').elements['new_postal_code'].value));
  var machine_info = 'machine_info'; //((document.getElementById('form_addmachine').elements['new_machine_info'].value));

  var protocol_comm = ((document.getElementById('form_addmachine').elements['new_machine_protocol_comm'].value));
  var ipaddress = ((document.getElementById('form_addmachine').elements['new_machine_ipaddress'].value));
  var port = ((document.getElementById('form_addmachine').elements['new_machine_port'].value));




  
  if (uid != '' && city != '' && state != '' && country != ''){
          $.ajax({
                type : "post",
                url: '/set_settings',
                dataType : "text",
                data:'setting=add_machine&uid='+uid+'&machine_name='+machine_name+'&machine_connected='+machine_connected+'&token='+token+'&city='+city+'&country='+country+'&state='+state+'&machine_info='+machine_info+'&protocol_comm='+protocol_comm+'&ipaddress='+ipaddress+'&port='+port,
                success : function(data) {
                  // alert(data);
                  Swal.fire({
                    position:'center',
                    type:'success',
                    title:'Success',
                    showConfirmButton:false,
                    timer:1500
                  }).then(function(){ 
                   location.reload();
                   }
                );                    
                },
                error : function(data) {
                  // alert("Error");
                  Swal.fire({
                    icon: 'error',
                    title: 'Oops...',
                    text: data.responseText                    
                  })                     
                }
        });

  }
  else {

      if (city == '' && state == '' && country == ''){
    
          Swal.fire({
                    title: 'Please enter valid city/state/country',
                    icon: 'error'
                  })

        
      }


      else{
          Swal.fire({
                    title: 'Something went wrong',
                    icon: 'error'
                  })

        }
      }

})



function Actionmachine(uid,machine_name,run,stop,pause,run_action,stop_action,pause_action){

  $('#uid_setaction').val(uid);
  $('#run_setaction').val(run);
  $('#stop_setaction').val(stop);
  $('#pause_setaction').val(pause);


  if (run_action == '1'){
    $("#action_run_submit").attr('class', 'btn button_red');
  }
  if (stop_action == '1'){
    $("#action_stop_submit").attr('class', 'btn button_red');
  }
  if (pause_action == '1'){
    $("#action_pause_submit").attr('class', 'btn button_red');
  }
  

  $('#mn_setaction').text("Please select the action to performance on the Machine Id: "+uid+" | Name: "+machine_name);

  if (run == '-' || stop == '-' || pause == '-'){
            Swal.fire({
                    title: 'Machine not yet connected',
                    icon: 'error'
                  })
  } 
  else{
        $('#myModal_action').modal('show');
  } 
  
} 



$("#actionmachine_submit").click(function(){
  var uid = ((document.getElementById('form_actionmachine').elements['uid_setaction'].value));
  var new_task_number = ((document.getElementById('form_actionmachine').elements['new_task_number'].value));

if (uid != '' && new_task_number != ''){
          $.ajax({
                type : "post",
                url: '/set_settings',
                dataType : "text",
                data:'setting=action_newtask&uid='+uid+'&new_task_number='+new_task_number,
                success : function(data) {
                  // alert(data);
                  Swal.fire({
                    position:'center',
                    type:'success',
                    title:'Success',
                    showConfirmButton:false,
                    timer:1500
                  }).then(function(){ 
                   location.reload();
                   }
                );                    
                },
                error : function(data) {
                  // alert("Error");
                  Swal.fire({
                    icon: 'error',
                    title: 'Oops...',
                    text: data.responseText                    
                  })                     
                }
        });

  }
  else {
          Swal.fire({
                    title: 'Something went wrong',
                    icon: 'error'
                  })

        }



});





$("#action_run_submit").click(function(){
  var uid = ((document.getElementById('form_actionmachine').elements['uid_setaction'].value));
  var run_setaction = ((document.getElementById('form_actionmachine').elements['run_setaction'].value));

if (uid != '' && run_setaction != ''){
          $.ajax({
                type : "post",
                url: '/set_settings',
                dataType : "text",
                data:'setting=action_run&uid='+uid+'&run='+run_setaction,
                success : function(data) {
                  // alert(data);
                  Swal.fire({
                    position:'center',
                    type:'success',
                    title:'Success',
                    showConfirmButton:false,
                    timer:1500
                  }).then(function(){ 
                   location.reload();
                   }
                );                    
                },
                error : function(data) {
                  // alert("Error");
                  Swal.fire({
                    icon: 'error',
                    title: 'Oops...',
                    text: data.responseText                    
                  })                     
                }
        });

  }
  else {
          Swal.fire({
                    title: 'Something went wrong',
                    icon: 'error'
                  })

        }



});



$("#action_stop_submit").click(function(){
  var uid = ((document.getElementById('form_actionmachine').elements['uid_setaction'].value));
  var stop_setaction = ((document.getElementById('form_actionmachine').elements['stop_setaction'].value));

if (uid != '' && stop_setaction != ''){
          $.ajax({
                type : "post",
                url: '/set_settings',
                dataType : "text",
                data:'setting=action_stop&uid='+uid+'&stop='+stop_setaction,
                success : function(data) {
                  // alert(data);
                  Swal.fire({
                    position:'center',
                    type:'success',
                    title:'Success',
                    showConfirmButton:false,
                    timer:1500
                  }).then(function(){ 
                   location.reload();
                   }
                );                    
                },
                error : function(data) {
                  // alert("Error");
                  Swal.fire({
                    icon: 'error',
                    title: 'Oops...',
                    text: data.responseText                    
                  })                     
                }
        });

  }
  else {
          Swal.fire({
                    title: 'Something went wrong',
                    icon: 'error'
                  })

        }



});





$("#action_pause_submit").click(function(){
  var uid = ((document.getElementById('form_actionmachine').elements['uid_setaction'].value));
  var pause_setaction = ((document.getElementById('form_actionmachine').elements['pause_setaction'].value));

if (uid != '' && pause_setaction != ''){
          $.ajax({
                type : "post",
                url: '/set_settings',
                dataType : "text",
                data:'setting=action_pause&uid='+uid+'&pause='+pause_setaction,
                success : function(data) {
                  // alert(data);
                  Swal.fire({
                    position:'center',
                    type:'success',
                    title:'Success',
                    showConfirmButton:false,
                    timer:1500
                  }).then(function(){ 
                   location.reload();
                   }
                );                    
                },
                error : function(data) {
                  // alert("Error");
                  Swal.fire({
                    icon: 'error',
                    title: 'Oops...',
                    text: data.responseText                    
                  })                     
                }
        });

  }
  else {
          Swal.fire({
                    title: 'Something went wrong',
                    icon: 'error'
                  })

        }



});


</script>





    
<script type="text/javascript">
  $(document).ready(function () {
    $('#example').DataTable({scrollX: true,scrollY: 300,
        paging: false});
});
</script>


<script type="text/javascript">

function Editmachine(uid,machine_name,machine_connected,token,city,country,state,machine_info,protocol_comm,ipaddress,port){

  $('#uid_setaddress').val(uid);
  $('#machine_name').val(machine_name);
  $('#machine_connected').val(machine_connected);
  $('#token').val(token);
  $('#protocol_comm_').val(protocol_comm);
  $('#protocol_commP').val(protocol_comm);
  $('#ipaddress_').val(ipaddress);
  $('#port_').val(port);
  // $('#citySS').val(city);
  // $('#countryP').val(country);
  // $('#stateSS').val(state);
  $('#machine_info').val(machine_info);
$('#countryP').html('<option value="'+country+'">'+country+'</option>');
$("#stateP").html('<option value="'+state+'">'+state+'</option>');
$("#cityP").html('<option value="'+city+'">'+city+'</option>');
  
} 

$("#editmachine_submit").click(function(){
  var uid = ((document.getElementById('form_editmachine').elements['uid_setaddress'].value));
  var machine_name = ((document.getElementById('form_editmachine').elements['machine_name'].value));
  var machine_connected = ((document.getElementById('form_editmachine').elements['machine_connected'].value));
  var token = ((document.getElementById('form_editmachine').elements['token'].value));
  var city = 'city' //((document.getElementById('form_editmachine').elements['cityS'].value));
  var country = 'country' //((document.getElementById('form_editmachine').elements['countryS'].value));
  var state = 'state' //((document.getElementById('form_editmachine').elements['stateS'].value));
  var machine_info = 'machine_info' //((document.getElementById('form_editmachine').elements['machine_info'].value));
  var protocol_comm = ((document.getElementById('form_editmachine').elements['protocol_comm_'].value));
  var ipaddress = ((document.getElementById('form_editmachine').elements['ipaddress_'].value));
  var port = ((document.getElementById('form_editmachine').elements['port_'].value));


  if (uid != '' && city != '' && state != '' && country != '' && protocol_comm != '' && ipaddress != '' && port != ''){
          $.ajax({
                type : "post",
                url: '/set_settings',
                dataType : "text",
                data:'setting=edit_address&uid='+uid+'&machine_name='+machine_name+'&machine_connected='+machine_connected+'&token='+token+'&city='+city+'&country='+country+'&state='+state+'&machine_info='+machine_info+'&protocol_comm='+protocol_comm+'&ipaddress='+ipaddress+'&port='+port,
                success : function(data) {
                  // alert(data);
                  Swal.fire({
                    position:'center',
                    type:'success',
                    title:'Success',
                    showConfirmButton:false,
                    timer:1500
                  }).then(function(){ 
                   location.reload();
                   }
                );                    
                },
                error : function(data) {
                  // alert("Error");
                  Swal.fire({
                    icon: 'error',
                    title: 'Oops...',
                    text: data.responseText                    
                  })                     
                }
        });

  }
  else {

      if (city == '' && state == '' && country == ''){
    
          Swal.fire({
                    title: 'Please enter valid city/state/country',
                    icon: 'error'
                  })

        
      }


      else{
          Swal.fire({
                    title: 'Something went wrong',
                    icon: 'error'
                  })

        }
      }

})
</script>
<script>
var xValues = ["Productivity", "Time Waiting"];
var yValues = [{{total_real_time}}, {{total_waiting_time}}, 0];
var barColors = ["blue", "cornflowerblue"];

new Chart("myChart", {
  type: "bar",
  data: {
    labels: xValues,
    datasets: [{
      backgroundColor: barColors,
      data: yValues
    }]
  },
  options: {
    legend: {display: false},
    title: {
      display: true,
      
    }
  }
});
</script>


</body>

 
</html>
